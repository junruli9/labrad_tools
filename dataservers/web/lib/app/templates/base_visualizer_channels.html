<div class="row flex-fill pt-4">
  <div class="col">
    <div class="row flex-fill p-2">
      <button class="btn btn-dark btn-all-toggle">
        Turn all channels on
      </button>
    </div>

    <div class="row flex-fill p-2">
      <div id="accordion-da" class="accordion visualizer-channels">
        {% for l in digital %}
          <div class="card flex-fill">
            <div class="card-header p-0" id="heading-{{l.device}}">
              <h5 class="mb-0">
                <button class="btn btn-link" data-toggle="collapse" data-target="#collapse-{{l.device}}" aria-expanded="false" aria-controls="collapse-{{l.device}}">
                  {{l.device}}
                </button>
              </h5>
            </div>
        
            <div id="collapse-{{l.device}}" class="collapse" aria-labelledby="heading-{{l.device}}" data-parent="#accordion-da">
              <div class="card-body">
                <div class="form-check">
                  <button class="btn btn-dark btn-device-toggle" data-device="{{l.device}}">
                    All on
                  </button>
                </div>
                {% for loc in l.channels %}
                  <div class="form-check">
                    <input class="form-check-input check-channel check-channel-{{l.device}}" type="checkbox" value={{loc.loc}} id="channel-check-{{loc.loc}}" data-nameloc="{{loc.name}}@{{loc.loc}}" data-type="digital">
                    <label class="form-check-label" for="channel-check-{{loc.loc}}">
                       {{loc.loc}}: {{loc.name}}
                    </label>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
        {% endfor %}

        {% for l in analog %}
          <div class="card">
            <div class="card-header p-0" id="heading-{{l.device}}">
              <h5 class="mb-0">
                <button class="btn btn-link" data-toggle="collapse" data-target="#collapse-{{l.device}}" aria-expanded="false" aria-controls="collapse-{{l.device}}">
                  {{l.device}}
                </button>
              </h5>
            </div>
        
            <div id="collapse-{{l.device}}" class="collapse" aria-labelledby="heading-{{l.device}}" data-parent="#accordion-da">
              <div class="card-body">
                <div class="form-check">
                  <button class="btn btn-dark btn-device-toggle" data-device="{{l.device}}">
                    All on
                  </button>
                </div>
                {% for loc in l.channels %}
                  <div class="form-check">
                    <input class="form-check-input check-channel check-channel-{{l.device}}" type="checkbox" value={{loc.loc}} id="channel-check-{{loc.loc}}" data-nameloc="{{loc.name}}@{{loc.loc}}" data-type="analog">
                    <label class="form-check-label" for="channel-check-{{loc.loc}}">
                      {{loc.name}}
                    </label>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
        {% endfor %}

        {% for l in ad5791 %}
          <div class="card">
            <div class="card-header p-0" id="heading-{{l.device}}">
              <h5 class="mb-0">
                <button class="btn btn-link" data-toggle="collapse" data-target="#collapse-{{l.device}}" aria-expanded="false" aria-controls="collapse-{{l.device}}">
                  {{l.device}}
                </button>
              </h5>
            </div>
        
            <div id="collapse-{{l.device}}" class="collapse" aria-labelledby="heading-{{l.device}}" data-parent="#accordion-da">
              <div class="card-body">
                <div class="form-check">
                  <button class="btn btn-dark btn-device-toggle" data-device="{{l.device}}">
                    All on
                  </button>
                </div>
                {% for loc in l.channels %}
                  <div class="form-check">
                    <input class="form-check-input check-channel check-channel-{{l.device}}" type="checkbox" value={{loc.loc}} id="channel-check-{{loc.loc}}" data-nameloc="{{loc.name}}@{{loc.loc}}" data-type="ad5791">
                    <label class="form-check-label" for="channel-check-{{loc.loc}}">
                      {{loc.name}}
                    </label>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

<script src="/krbtools/scripts/visualizer_channels.js"></script>